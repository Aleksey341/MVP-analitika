# üóÑÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

## –ü—Ä–æ–±–ª–µ–º–∞: –ø—É—Å—Ç—ã–µ –≤—ã–ø–∞–¥–∞—é—â–∏–µ —Å–ø–∏—Å–∫–∏ –Ω–∞ –¥–∞—à–±–æ—Ä–¥–µ

–ï—Å–ª–∏ –Ω–∞ –¥–∞—à–±–æ—Ä–¥–µ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ –≤ –≤—ã–ø–∞–¥–∞—é—â–∏—Ö —Å–ø–∏—Å–∫–∞—Ö "–ö–∞—Ç–µ–≥–æ—Ä–∏—è —É—Å–ª—É–≥" –∏ "–£—Å–ª—É–≥–∞", —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Ç–∞–±–ª–∏—Ü—ã `services_catalog` –∏ `service_values` –Ω–µ —Å–æ–∑–¥–∞–Ω—ã –∏–ª–∏ –ø—É—Å—Ç—ã.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### –®–∞–≥ 1: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≤—Å–µ—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö —Ç–∞–±–ª–∏—Ü –∏ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö:

```bash
npm run db:init
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ —Å–æ–∑–¥–∞—Å—Ç:
- ‚úì `municipalities` - —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –º—É–Ω–∏—Ü–∏–ø–∞–ª–∏—Ç–µ—Ç–æ–≤
- ‚úì `indicators_catalog` - –∫–∞—Ç–∞–ª–æ–≥ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π (—Ñ–æ—Ä–º–∞ 1-–ì–ú–£)
- ‚úì `indicator_values` - –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π
- ‚úì `services_catalog` - **—Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —É—Å–ª—É–≥** (25 —Ç–µ—Å—Ç–æ–≤—ã—Ö —É—Å–ª—É–≥)
- ‚úì `service_values` - –∑–Ω–∞—á–µ–Ω–∏—è —É—Å–ª—É–≥

### –®–∞–≥ 2: –ó–∞–≥—Ä—É–∑–∫–∞ –º—É–Ω–∏—Ü–∏–ø–∞–ª–∏—Ç–µ—Ç–æ–≤ –∏–∑ Excel

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å —Ñ–∞–π–ª —Å –º—É–Ω–∏—Ü–∏–ø–∞–ª–∏—Ç–µ—Ç–∞–º–∏:

```bash
npm run db:migrate
```

–ò–ª–∏ –≤—Ä—É—á–Ω—É—é:

```bash
node migrate.js --file "./–º—É–Ω–∏—Ü–∏–ø–∞–ª–∏—Ç–µ—Ç—ã —Å –≥–ª–∞–≤–∞–º–∏ –∏ –¥–æ–ª–∂–Ω–æ—Å—Ç—è–º–∏.xlsx" --sheet "–õ–∏—Å—Ç1"
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä –∏ –æ—Ç–∫—Ä–æ–π—Ç–µ –¥–∞—à–±–æ—Ä–¥:

```bash
npm start
```

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: http://localhost/dashboard

–¢–µ–ø–µ—Ä—å –≤—ã–ø–∞–¥–∞—é—â–∏–µ —Å–ø–∏—Å–∫–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω—ã:
- **–ö–∞—Ç–µ–≥–æ—Ä–∏—è —É—Å–ª—É–≥**: –ú–§–¶ - –ü–∞—Å–ø–æ—Ä—Ç–∞ –∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã, –ú–§–¶ - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –∏ –¥—Ä.
- **–£—Å–ª—É–≥–∞**: –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ—è–≤–∏—Ç—Å—è —Å–ø–∏—Å–æ–∫ —É—Å–ª—É–≥

## üìä –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è `npm run db:init` –≤ –±–∞–∑–µ –±—É–¥—É—Ç —Å–æ–∑–¥–∞–Ω—ã:

### –ü–æ–∫–∞–∑–∞—Ç–µ–ª–∏ (10 —à—Ç.):
- –ß–∏—Å–ª–µ–Ω–Ω–æ—Å—Ç—å –Ω–∞—Å–µ–ª–µ–Ω–∏—è
- –ü–ª–æ—â–∞–¥—å —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏
- –ë—é–¥–∂–µ—Ç –º—É–Ω–∏—Ü–∏–ø–∞–ª–∏—Ç–µ—Ç–∞
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ú–§–¶
- –ò –¥—Ä—É–≥–∏–µ...

### –£—Å–ª—É–≥–∏ (25 —à—Ç.) –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º:

**–ú–§–¶ - –ü–∞—Å–ø–æ—Ä—Ç–∞ –∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã:**
- –í—ã–¥–∞—á–∞ –ø–∞—Å–ø–æ—Ä—Ç–∞ –≥—Ä–∞–∂–¥–∞–Ω–∏–Ω–∞ –†–§
- –ó–∞–º–µ–Ω–∞ –ø–∞—Å–ø–æ—Ä—Ç–∞ –≥—Ä–∞–∂–¥–∞–Ω–∏–Ω–∞ –†–§
- –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–≥—Ä–∞–Ω–ø–∞—Å–ø–æ—Ä—Ç–∞

**–ú–§–¶ - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è:**
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ –º–µ—Å—Ç—É –∂–∏—Ç–µ–ª—å—Å—Ç–≤–∞
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ –º–µ—Å—Ç—É –ø—Ä–µ–±—ã–≤–∞–Ω–∏—è

**–ú–§–¶ - –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏:**
- –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –°–ù–ò–õ–°
- –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–Ω—Å–∫–æ–≥–æ –∫–∞–ø–∏—Ç–∞–ª–∞

**–ú–§–¶ - –ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å:**
- –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—ã–ø–∏—Å–∫–∏ –∏–∑ –ï–ì–†–ù
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–∞–≤–∞ –Ω–∞ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å

**–ú–§–¶ - –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç:**
- –ü–æ–ª—É—á–µ–Ω–∏–µ –≤–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ —É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏—è
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–≥–æ —Å—Ä–µ–¥—Å—Ç–≤–∞

**–ò –¥—Ä—É–≥–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏...**

## üîß –†—É—á–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)

–ï—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ `npm run db:init` –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ SQL-—Ñ–∞–π–ª—ã –≤—Ä—É—á–Ω—É—é:

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ PostgreSQL
psql -h <host> -U <user> -d <database>

# –í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å—Ö–µ–º—É
\i database/schema.sql

# –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
\i database/seed_data.sql
```

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Ç–∞–±–ª–∏—Ü:

```sql
SELECT tablename FROM pg_tables WHERE schemaname = 'public' ORDER BY tablename;
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø–∏—Å–µ–π:

```sql
SELECT
  (SELECT COUNT(*) FROM public.municipalities) as municipalities,
  (SELECT COUNT(*) FROM public.indicators_catalog) as indicators,
  (SELECT COUNT(*) FROM public.services_catalog) as services;
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π —É—Å–ª—É–≥:

```sql
SELECT category, COUNT(*) as cnt
FROM public.services_catalog
GROUP BY category
ORDER BY category;
```

–î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏:
```
               category                | cnt
---------------------------------------+-----
 –ö–æ–º–º—É–Ω–∞–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏                  |   3
 –õ–∏—Ü–µ–Ω–∑–∏–∏ –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è                |   3
 –ú–§–¶ - –ó–∞–Ω—è—Ç–æ—Å—Ç—å                      |   1
 –ú–§–¶ - –ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å                   |   2
 –ú–§–¶ - –ü–∞—Å–ø–æ—Ä—Ç–∞ –∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã           |   3
 –ú–§–¶ - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è                    |   2
 –ú–§–¶ - –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏              |   2
 –ú–§–¶ - –°–ø—Ä–∞–≤–∫–∏                        |   2
 –ú–§–¶ - –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç                      |   3
 –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ –≤—ã–ø–ª–∞—Ç—ã                   |   3
```

## üìù –ò–º–ø–æ—Ä—Ç —Å–≤–æ–∏—Ö –¥–∞–Ω–Ω—ã—Ö

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ —É—Å–ª—É–≥–∞–º –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ API –∏–º–ø–æ—Ä—Ç–∞:

```bash
curl -X POST http://localhost/api/import/services-catalog \
  -H "Content-Type: application/json" \
  -H "x-import-token: YOUR_TOKEN" \
  -d '[
    {
      "code": "custom_001",
      "name": "–ú–æ—è —É—Å–ª—É–≥–∞",
      "unit": "—à—Ç.",
      "category": "–ú–æ—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è"
    }
  ]'
```

**–í–∞–∂–Ω–æ:** –î–ª—è –∏–º–ø–æ—Ä—Ç–∞ –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```env
IMPORT_ENABLED=true
IMPORT_TOKEN=your-secret-token
```

## üö® –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

### 1. "services_catalog not found"
**–†–µ—à–µ–Ω–∏–µ:** –í—ã–ø–æ–ª–Ω–∏—Ç–µ `npm run db:init`

### 2. "–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã" –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –∑–∞–ø—É—â–µ–Ω –ª–∏ —Å–µ—Ä–≤–µ—Ä –∏ –¥–æ—Å—Ç—É–ø–Ω–∞ –ª–∏ –ë–î

### 3. –ü—É—Å—Ç—ã–µ –≤—ã–ø–∞–¥–∞—é—â–∏–µ —Å–ø–∏—Å–∫–∏ –ø–æ—Å–ª–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —Å—Ç—Ä–æ–∫–∏ `DB mapping: {...}`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `servicesCatalog` –Ω–µ `null`
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä –ø–æ—Å–ª–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ë–î

## üìö –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
reports-system/
‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îú‚îÄ‚îÄ schema.sql          # –°—Ö–µ–º–∞ –ë–î (–≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã)
‚îÇ   ‚îî‚îÄ‚îÄ seed_data.sql       # –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îî‚îÄ‚îÄ init-database.js    # –°–∫—Ä–∏–ø—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ migrate.js              # –ò–º–ø–æ—Ä—Ç –º—É–Ω–∏—Ü–∏–ø–∞–ª–∏—Ç–µ—Ç–æ–≤ –∏–∑ Excel
‚îî‚îÄ‚îÄ seed.js                 # –°—Ç–∞—Ä—ã–π —Å–∫—Ä–∏–ø—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –º—É–Ω–∏—Ü–∏–ø–∞–ª–∏—Ç–µ—Ç–æ–≤
```

---

**–í–µ—Ä—Å–∏—è:** 1.0
**–î–∞—Ç–∞:** 2025-10-01
