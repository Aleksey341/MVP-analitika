# üìä –°–∏—Å—Ç–µ–º–∞ –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç–∏ ‚Äî –§–æ—Ä–º–∞ 1-–ì–ú–£

–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å–±–æ—Ä–∞ –∏ –∞–Ω–∞–ª–∏–∑–∞ –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç–∏ –ø–æ —Ñ–æ—Ä–º–µ 1-–ì–ú–£ –¥–ª—è –º—É–Ω–∏—Ü–∏–ø–∞–ª–∏—Ç–µ—Ç–æ–≤ –õ–∏–ø–µ—Ü–∫–æ–π –æ–±–ª–∞—Å—Ç–∏.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **üìù –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º** - –ò–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π
- **üìä –î–∞—à–±–æ—Ä–¥ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏** - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏ –∏ –æ—Ç—á–µ—Ç—ã
- **üìà –î–∏–Ω–∞–º–∏–∫–∞ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π** - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø–æ –≤—Ä–µ–º–µ–Ω–∏
- **üèÜ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º—É–Ω–∏—Ü–∏–ø–∞–ª–∏—Ç–µ—Ç–æ–≤** - –°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- **üì• –≠–∫—Å–ø–æ—Ä—Ç Excel** - –í—ã–≥—Ä—É–∑–∫–∞ –æ—Ç—á–µ—Ç–æ–≤ –≤ —É–¥–æ–±–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
- **üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –ó–∞—â–∏—â–µ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- **üì± –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å** - –†–∞–±–æ—Ç–∞ –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

## üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Backend**: Node.js + Express
- **Frontend**: Vanilla JavaScript + Chart.js
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: PostgreSQL 17.5
- **–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞**: Amvera Cloud
- **–≠–∫—Å–ø–æ—Ä—Ç**: ExcelJS

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
pg_html_project/
‚îú‚îÄ‚îÄ .env.example          # –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ package.json          # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ server.js            # –ì–ª–∞–≤–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ database.js      # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ë–î
‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îú‚îÄ‚îÄ api.js           # –û–±—â–∏–µ API
‚îÇ   ‚îú‚îÄ‚îÄ reports.js       # API –æ—Ç—á–µ—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ dashboard.js     # API –¥–∞—à–±–æ—Ä–¥–∞
‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îú‚îÄ‚îÄ schema.sql       # –°—Ö–µ–º–∞ –ë–î
‚îÇ   ‚îî‚îÄ‚îÄ seed.sql         # –ù–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îî‚îÄ‚îÄ migrate.js       # –°–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–π
‚îî‚îÄ‚îÄ public/
    ‚îú‚îÄ‚îÄ index.html       # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
    ‚îú‚îÄ‚îÄ form.html        # –§–æ—Ä–º–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è
    ‚îî‚îÄ‚îÄ dashboard.html   # –î–∞—à–±–æ—Ä–¥
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
npm install
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ `.env.example` –≤ `.env` –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ:

```bash
# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö PostgreSQL (Amvera)
DB_HOST_RW=amvera-alex1976-cnpg-reports-db-rw
DB_HOST_RO=amvera-alex1976-cnpg-reports-db-ro
DB_HOST_R=amvera-alex1976-cnpg-reports-db-r
DB_PORT=5432
DB_NAME=reports
DB_USER=reports_admin
DB_PASSWORD=Qwerty12345!

# –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
NODE_ENV=production
PORT=80
```

### 3. –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ö–µ–º—ã –ë–î

```bash
npm run migrate
```

### 4. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
npm run dev

# –ü—Ä–æ–¥–∞–∫—à–Ω
npm start
```

## üåê API Endpoints

### –û–±—â–∏–µ API

- `GET /api/municipalities` - –°–ø–∏—Å–æ–∫ –º—É–Ω–∏—Ü–∏–ø–∞–ª–∏—Ç–µ—Ç–æ–≤
- `GET /api/indicators/:type` - –®–∞–±–ª–æ–Ω –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π
- `GET /api/stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã
- `GET /api/search` - –ü–æ–∏—Å–∫ –æ—Ç—á–µ—Ç–æ–≤

### –û—Ç—á–µ—Ç—ã

- `POST /api/reports` - –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–∞
- `GET /api/reports/:id` - –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç—á–µ—Ç–∞
- `GET /api/reports` - –°–ø–∏—Å–æ–∫ –æ—Ç—á–µ—Ç–æ–≤
- `DELETE /api/reports/:id` - –£–¥–∞–ª–µ–Ω–∏–µ –æ—Ç—á–µ—Ç–∞

### –î–∞—à–±–æ—Ä–¥

- `GET /api/dashboard/data` - –î–∞–Ω–Ω—ã–µ –¥–ª—è –¥–∞—à–±–æ—Ä–¥–∞
- `GET /api/dashboard/compare` - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- `POST /api/dashboard/export` - –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel
- `GET /api/dashboard/periods` - –î–æ—Å—Ç—É–ø–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã

## üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã

- **municipalities** - –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –º—É–Ω–∏—Ü–∏–ø–∞–ª–∏—Ç–µ—Ç–æ–≤
- **reports** - –û—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –æ—Ç—á–µ—Ç–æ–≤
- **report_values** - –ó–Ω–∞—á–µ–Ω–∏—è –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π
- **indicators_template** - –®–∞–±–ª–æ–Ω –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π

### –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è

- **v_reports_summary** - –°–≤–æ–¥–∫–∞ –ø–æ –æ—Ç—á–µ—Ç–∞–º
- **v_reports_analytics** - –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ

## üìä –î–∞—à–±–æ—Ä–¥

–î–∞—à–±–æ—Ä–¥ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç:

- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É** - –û–±—â–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã
- **–ì—Ä–∞—Ñ–∏–∫–∏ –¥–∏–Ω–∞–º–∏–∫–∏** - –ò–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏
- **–¢–æ–ø –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π** - –ù–∞–∏–±–æ–ª–µ–µ –∑–Ω–∞—á–∏–º—ã–µ –¥–∞–Ω–Ω—ã–µ
- **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—é** - –ü–æ –º—É–Ω–∏—Ü–∏–ø–∞–ª–∏—Ç–µ—Ç–∞–º, –ø–µ—Ä–∏–æ–¥–∞–º, –¥–∞—Ç–∞–º
- **–≠–∫—Å–ø–æ—Ä—Ç** - –î–∞–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ Excel

## üîß –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

```bash
curl http://your-domain/health
```

### –ú–∏–≥—Ä–∞—Ü–∏–∏

```bash
node scripts/migrate.js
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤

–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏ –∏ IP-–∞–¥—Ä–µ—Å–∞–º–∏.

## üöÄ –î–µ–ø–ª–æ–π –Ω–∞ Amvera

1. **–°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç** –Ω–∞ Amvera
2. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ PostgreSQL** –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**
4. **–í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏**
5. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è Amvera

```yaml
# amvera.yml
build:
  commands:
    - npm install
    - npm run migrate

start:
  command: npm start

env:
  NODE_ENV: production
  PORT: 80
```

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- `/health` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ë–î
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **HTTPS** - –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- **CSP** - –ó–∞—â–∏—Ç–∞ –æ—Ç XSS
- **Rate Limiting** - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤
- **SQL Injection** - –ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- **CORS** - –ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞

## üìù –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–∞

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ `/form`
2. –í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Å—è—Ü –∏ –º—É–Ω–∏—Ü–∏–ø–∞–ª–∏—Ç–µ—Ç
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
4. –ù–∞–∂–º–∏—Ç–µ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ—Ç—á–µ—Ç"

### –ü—Ä–æ—Å–º–æ—Ç—Ä –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ `/dashboard`
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ñ–∏–ª—å—Ç—Ä—ã
3. –ê–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ
4. –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `/health` endpoint
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
4. –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

¬© 2024 –°–∏—Å—Ç–µ–º–∞ –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç–∏ –º—É–Ω–∏—Ü–∏–ø–∞–ª–∏—Ç–µ—Ç–æ–≤ –õ–∏–ø–µ—Ü–∫–æ–π –æ–±–ª–∞—Å—Ç–∏

---

**–í–µ—Ä—Å–∏—è**: 1.0
**–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞**: Amvera
**–°—Ç–∞—Ç—É—Å**: –ì–æ—Ç–æ–≤ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É ‚úÖ